<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martian Robots</title>

    <!-- Material UI CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@mui/material@5.15.0/dist/material-ui.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mui/icons-material@5.15.0/icon.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .result-card {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        .error-card {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        .sample-card {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .sample-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .instruction-hint {
            font-size: 0.875rem;
            color: #666;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="header">
        <h1 style="margin: 0 0 0.5rem 0;">üöÄ Martian Robots</h1>
        <p style="margin: 0; opacity: 0.9;">Process robot instructions on the Martian grid</p>
    </div>

    <!-- Main Content Grid -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
        <!-- Input Form -->
        <div>
            <div class="card">
                <h2 style="margin-top: 0;">Robot Configuration</h2>

                <form th:action="@{/process}" method="post" th:object="${robotInput}">
                    <div class="form-grid">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Grid Max X
                            </label>
                            <input type="number" th:field="*{gridMaxX}"
                                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;"
                                   min="1" max="50" required>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Grid Max Y
                            </label>
                            <input type="number" th:field="*{gridMaxY}"
                                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;"
                                   min="1" max="50" required>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Start X
                            </label>
                            <input type="number" th:field="*{startX}"
                                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;"
                                   min="0" max="50" required>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Start Y
                            </label>
                            <input type="number" th:field="*{startY}"
                                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;"
                                   min="0" max="50" required>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Orientation
                            </label>
                            <select th:field="*{startOrientation}"
                                    style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <option value="N">North (N)</option>
                                <option value="S">South (S)</option>
                                <option value="E">East (E)</option>
                                <option value="W">West (W)</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Instructions
                        </label>
                        <input type="text" th:field="*{instructions}"
                               style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;"
                               maxlength="100" required
                               placeholder="Enter L, R, F instructions (e.g., RFRFRFRF)">
                        <div class="instruction-hint">
                            L = Turn Left, R = Turn Right, F = Move Forward (max 100 chars)
                        </div>
                    </div>

                    <button type="submit"
                            style="background: #667eea; color: white; border: none; padding: 0.75rem 2rem;
                                       border-radius: 6px; cursor: pointer; font-weight: 500; transition: background 0.3s;">
                        Process Robot
                    </button>
                </form>
            </div>

            <!-- Sample Inputs -->
            <div th:each="sample, iter : ${sampleInputs}">
                <div class="card sample-card"
                     th:onclick="'loadSample(' + ${iter.index} + ')'"
                     style="margin-bottom:1rem;padding:1rem;cursor:pointer;">
                    <div style="font-weight:500;">
                        Grid: [[${sample.gridMaxX}]]x[[${sample.gridMaxY}]] |
                        Start: ([[${sample.startX}]], [[${sample.startY}]]) [[${sample.startOrientation}]]
                    </div>
                    <div style="font-family:monospace;margin-top:0.5rem;">
                        Instructions: [[${sample.instructions}]]
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div>
            <!-- Results Card -->
            <div th:if="${success}" class="card result-card">
                <h2 style="margin-top: 0; color: #2e7d32;">‚úÖ Processing Results</h2>

                <div th:each="result : ${results}">
                    <div style="background: white; padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
                        <div style="font-family: monospace; font-size: 1.1rem; font-weight: 500;">
                            [[${result.toOutputString()}]]
                        </div>
                    </div>
                </div>

                <div style="margin-top: 1.5rem; padding: 1rem; background: #f1f8e9; border-radius: 6px;">
                    <h4 style="margin: 0 0 0.5rem 0;">Input Summary</h4>
                    <div style="font-family: monospace;">
                        Grid: [[${robotInput.gridMaxX}]]x[[${robotInput.gridMaxY}]] |
                        Start: ([[${robotInput.startX}]], [[${robotInput.startY}]]) [[${robotInput.startOrientation}]]<br>
                        Instructions: [[${robotInput.instructions}]]
                    </div>
                </div>
            </div>

            <!-- Error Card -->
            <div th:if="${error}" class="card error-card">
                <h3 style="margin-top: 0; color: #d32f2f;">‚ùå Error</h3>
                <p th:text="${error}"></p>
            </div>

            <!-- Instructions Card -->
            <div class="card">
                <h3 style="margin-top: 0;">How It Works</h3>

                <div style="margin-bottom: 1rem;">
                    <h4 style="margin: 0 0 0.5rem 0;">üìã Problem Description</h4>
                    <p style="margin: 0;">Robots move on a rectangular Martian grid according to instructions.
                        If a robot moves off the grid, it's lost but leaves a scent that prevents other robots
                        from being lost at the same spot.</p>
                </div>

                <div style="margin-bottom: 1rem;">
                    <h4 style="margin: 0 0 0.5rem 0;">üéØ Instructions</h4>
                    <ul style="margin: 0; padding-left: 1.2rem;">
                        <li><strong>L</strong>: Turn left 90¬∞</li>
                        <li><strong>R</strong>: Turn right 90¬∞</li>
                        <li><strong>F</strong>: Move forward one grid point</li>
                    </ul>
                </div>

                <div>
                    <h4 style="margin: 0 0 0.5rem 0;">üìù Output Format</h4>
                    <p style="margin: 0; font-family: monospace;">X Y ORIENTATION [LOST]</p>
                    <p style="margin: 0.5rem 0 0 0; color: #666;">Example: 1 1 E or 3 3 N LOST</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for sample loading -->
<script th:inline="javascript">
    const samples = /*[[${sampleInputs}]]*/ [];

    function loadSample(index) {
        const s = samples[index];
        document.getElementById('gridMaxX').value          = s.gridMaxX;
        document.getElementById('gridMaxY').value          = s.gridMaxY;
        document.getElementById('startX').value            = s.startX;
        document.getElementById('startY').value            = s.startY;
        document.getElementById('startOrientation').value = s.startOrientation;
        document.getElementById('instructions').value      = s.instructions;
    }

    // Load first sample by default
    window.addEventListener('load', () => {
        if (!window.location.href.includes('/process')) {
            loadSample(0);
        }
    });
</script>
</body>
</html>